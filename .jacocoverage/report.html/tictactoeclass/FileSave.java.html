<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>FileSave.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCoverage analysis of project &quot;TicTacToeClass&quot; (powered by JaCoCo from EclEmma)</a> &gt; <a href="index.source.html" class="el_package">tictactoeclass</a> &gt; <span class="el_source">FileSave.java</span></div><h1>FileSave.java</h1><pre class="source lang-java linenums">package tictactoeclass;

import java.io.FileWriter;
import java.io.BufferedWriter;
import java.io.IOException;

/**
 *
 * @author lvall
 * 
 * FileSave class
 * 
 * Initial draft requirements
 * 
 *  Default File name hardcoded (for now) as &quot;TicTacToeGameLog.txt&quot;
 *   File contents stored as text
 *   If file doesn't exist, file is created and opened for writing
 *   Opening existing files in append mode
 *   Opening existing file in read mode
 *   If file opened for reading and doesn't exist
 *     print error message on console, and ignore subsequent requests to read data
 *   If file opened cannot be opened for writing
 *     print error message on console and ignore all other file operation requests
 *   If read operation fails or reaches end-of-file (EOF) return null
 *   if write operation fails, print error message on console and assert
 */
public class FileSave {
    private static final String DEFAULT_FILE_NAME = &quot;TicTacToeGameLog.txt&quot;;
    
    // Instance variables
    String saveFileName;
    FileWriter filePointer;
    BufferedWriter bufferedWritePointer;

    // Constructors - two flavors
    //   default file name &amp; user specified file name
    //   if file cannot be opened for writing, set filePointer = null
    public FileSave () {        
<span class="fc" id="L39">        this(DEFAULT_FILE_NAME);</span>
<span class="fc" id="L40">    } </span>
<span class="fc" id="L41">    public FileSave (String fileName) {</span>
<span class="fc" id="L42">        System.out.println(&quot;FileSave constructor called: &quot; + fileName);</span>
<span class="fc" id="L43">        this.openFile(fileName);</span>
<span class="fc" id="L44">        saveFileName = fileName;</span>
<span class="fc" id="L45">    }</span>
    
    /**
     * Open named file for creation/append
     *    Sets filePointer to File &amp; bufferedWritePointer to file position or
     *    null if cannot open file
     * @param fileName - file name (Sting) to open for appending
     * @return FileWriter - pointer to open file
     */
    private FileWriter openFile(String fileName) {
<span class="pc" id="L55">        try (</span>
<span class="fc" id="L56">                FileWriter fp = new FileWriter(fileName, true);</span>
                ) {
<span class="fc" id="L58">            filePointer = fp;</span>
<span class="pc bpc" id="L59" title="6 of 8 branches missed.">        }</span>
<span class="nc" id="L60">        catch (IOException e) {</span>
<span class="nc" id="L61">            e.printStackTrace();</span>
<span class="nc" id="L62">            filePointer = null;</span>
<span class="fc" id="L63">        }</span>
<span class="fc" id="L64">        return (filePointer);</span>
    }
    
    /**
     * Check if save file is currently/successfully opened
     * @return true if file is open
     */
    public Boolean isSaveFileOpen() {
<span class="nc bnc" id="L72" title="All 2 branches missed.">        if (filePointer == null)</span>
<span class="nc" id="L73">            return false;</span>
        else
<span class="nc" id="L75">            return true;</span>
    }
    
    /**
     * Opens file for append, writes data and closes stream
     *   ToDo: Would like to not open and close every time, but not sure how to yet
     * @param data - string to be written to save File (incl /n if desired)
     */
    public void writeToSaveFile(String data) {
<span class="pc bpc" id="L84" title="1 of 2 branches missed.">        if (filePointer != null) {</span>
            try {
<span class="fc" id="L86">            filePointer = new FileWriter(saveFileName, true);</span>
<span class="fc" id="L87">            bufferedWritePointer = new BufferedWriter(filePointer);</span>
<span class="fc" id="L88">            bufferedWritePointer.write(data);</span>
            }
<span class="nc" id="L90">            catch (IOException e) {</span>
<span class="nc" id="L91">                e.printStackTrace();</span>
            }
            finally {
<span class="nc" id="L94">                try {</span>
<span class="pc" id="L95">                    bufferedWritePointer.close();</span>
                }
<span class="nc" id="L97">                catch (IOException ec) {</span>
                    ;  // catch IOException - but do nothing
<span class="pc" id="L99">                }</span>
<span class="nc" id="L100">            }</span>
        }
<span class="fc" id="L102">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.6.201602180812</span></div></body></html>